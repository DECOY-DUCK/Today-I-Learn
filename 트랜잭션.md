## 트랜잭션

데이터베이스는 다수의 사용자가 사용하더라도 항상 정확하고 일관성있는 데이터를 저장해야 한다. 때문에 DBMS는 트랜잭션 관리를 통해 결과적으로 데이터를 일관되고 정확한 상태를 유지한다.

### 트랜잭션이란

트랜잭션은 하나의 작업을 수행하기 위한 연산들의 집합이다. 논리적으로 데이터베이스의 작업 단위가 되며 장애가 발생했을때 복구하는 작업단위가 되기도 한다.

### 트랜잭션 특징

<img width="426" alt="스크린샷 2022-10-09 오후 9 56 01" src="https://user-images.githubusercontent.com/51963264/194758104-70b5f081-96fc-45b5-a28e-75c696e40819.png">


데이터베이스의 무결성과 일관성이 보장되기 위해서는 트랜잭션의 네가지 특성이 만족되어야 한다. 이 네가지 특성을 보장하기 위해 DBMS는 회복과 병행제어라는 기능을 지원한다. 

`원자성 Atomicity`

트랜잭션을 구성하는 연산들이 모두 실행되거나 하나도 실행되지 않아야 한다는 것을 의미한다. 수행 도중 장애가 발생해 작업을 모두 완료하지 못했다면 실행한 연산들은 모두 취소해 트랜잭션이 실행되기 전 상태가 되어야 한다.

`일관성 Consistency`

트랜잭션이 완료된 결과값이 일괸된 상태로 유지되야 함을 의미한다. 즉, 트랜잭션 실행 전에 데이터베이스가 일관된 상태였다면 수행 후에도 데이터베이스의 상태가 일관적이어야 한다.

`고립성 Isolation`

트랜잭션끼리 서로에게 영향을 끼치지 않도록 실행 중인 트랜잭션에 접근을 막는 것을 의미한다. 일반적으로 데이테베이스 시스템은 여러 트랜잭션이 동시에 실행되는데 트랜잭션이 독립적으로 실행될 수 있도록 다른 트랜잭션 중간 연산 결과에 접슨하지 못하도록 한다.

`지속성 durability`

영속성이라 표현하기도 한다. 트랜잭션이 정상적으로 종료될 경우 데이터베이스의 수행결과가 어떤 경우에도 손실되지 않고 영구적이어야 한다는 것을 의미한다

### 트랜잭션의 상태

![image](https://user-images.githubusercontent.com/51963264/194762182-e39af9b7-f185-4aad-8521-d5907253b1e2.png)

트랜잭션은 다섯가지 상태 중 하나에 속하게 된다.

`활동 상태 Active`

트랜잭션이 실행 중인 상태

`부분완료 상태 Partially Commited`

트랜잭션의 마지막 연산까지 실행했지만, Commit 연산이 실행되기 직전의 상태


`완료 상태 Committed`

트랜잭션이 성공적으로 종료되어 Commit 연산을 실행한 후의 상태

`실패 상태 Failed`

트랜잭션 실행에 오류가 발생하여 중단된 상태

`철회 Aborted`

트랜잭션이 비정상적으로 종료되어 Rollback 연산을 수행한 상태




